<mvc:View controllerName="aprobadores.project2.controller.Contratos"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core">
    <Page id="page" title="{i18n>title}">
        <content>
      <!-- Encabezado dinámico -->
      <VBox id="_IDGenVBox1" class="sapUiSmallMargin">
      <HBox id="_IDGenHBox1" alignItems="Center" justifyContent="SpaceBetween" class="sapUiMediumMarginBottom">
        <items>
          <HBox id="_IDGenHBox2" alignItems="Center">
            <items>
              <core:Icon id="_IDGenIcon" src="sap-icon://employee" />
              <Text id="_IDGenText" text="{header>/approverName}" class="sapUiSmallMarginBegin sapMTitle sapMTitleStyleH3"/>
            </items>
          </HBox>

          <HBox id="_IDGenHBox3" alignItems="Center">
            <items>
              <core:Icon id="_IDGenIcon1" src="sap-icon://pending" />
              <Text id="_IDGenText2" text="Pendientes: {header>/pendingCount}" class="sapUiSmallMarginBegin"/>
              <core:Icon id="_IDGenIcon2" src="sap-icon://locked" class="sapUiSmallMarginBegin"/>
              <Text id="_IDGenText3" text="Grupo: {header>/releaseGroup}" class="sapUiSmallMarginBegin"/>
            </items>
          </HBox>
        </items>
      </HBox>

        <!-- Barra de acciones -->
        <OverflowToolbar id="_IDGenOverflowToolbar">
          <ToolbarSpacer id="_IDGenToolbarSpacer1"/>
          <SearchField id="_IDGenSearchField" width="18rem" liveChange=".onSearch" placeholder="Buscar por N° de contrato..."/>
          <Button id="_IDGenButton3" icon="sap-icon://refresh" tooltip="Actualizar" press=".onRefresh"/>
          <Button id="_IDGenButton4" icon="sap-icon://detail-view" tooltip="Ver detalle" press=".onNavToDetail" type="Transparent"/>
          <Button id="_IDGenButton5" icon="sap-icon://accept" tooltip="Liberar" press=".onReleaseSelected" type="Accept"/>
        </OverflowToolbar>
      </VBox>

      <!-- Lista principal -->
      <List id="listContratos" mode="SingleSelectMaster" items="{
            path: '/ContratoSet'
          }">
        <ObjectListItem id="_IDGenObjectListItem"
          title="Contrato {Ebeln}"
          number="{MontoTotal}"
          numberUnit="{Moneda}"
          type="Active"
          press=".onItemPress"
          >
          <firstStatus>
            <ObjectStatus id="_IDGenObjectStatus2"
              text="{EstadoLiberacion}"
              state="{path: 'EstadoLiberacion', formatter: '.formatEstadoColor'}"
              icon="{path: 'EstadoLiberacion', formatter: '.formatEstadoIcon'}"/>
          </firstStatus>
          <secondStatus>
            <ObjectStatus id="_IDGenObjectStatus3" text="{Proveedor}"/>
          </secondStatus>
            <attributes>
              <ObjectAttribute id="_IDGenObjectAttribute3" title="Proveedor" text="{Lifnr} {Name1}"/>
              <ObjectAttribute id="_IDGenObjectAttribute4" title="Estado" text="{EstadoLiberacion}"/>
            </attributes>
        </ObjectListItem>
      </List>
    </content>
    </Page>
</mvc:View>
